<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="generator" content="Hugo 0.136.5">

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon_32.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="" />
  <meta property="og:url" content="http://localhost:1313/posts/lua%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%A806%E5%87%BD%E6%95%B0/" />
  <link rel="canonical" href="http://localhost:1313/posts/lua%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%A806%E5%87%BD%E6%95%B0/" /><link rel="apple-touch-icon" href="/favicon.png" />
  <link rel="icon" href="/favicon.png" />
  <link rel="shortcut" href="/favicon.png" /><link rel="alternate" type="application/atom+xml" href="http://localhost:1313/index.xml" title="å­æ˜¥å»¿ä¸€">

  <script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "http:\/\/localhost:1313\/"
      },
      "articleSection" : "posts",
      "name" : "Luaå­¦ä¹ ç¬”è®°ä¸¨06å‡½æ•°",
      "headline" : "Luaå­¦ä¹ ç¬”è®°ä¸¨06å‡½æ•°",
      "description" : "å‡½æ•°æ—¢å¯ä»¥ç”¨äºå®ŒæˆæŸç§ç‰¹å®šä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥åªæ˜¯è¿›è¡Œä¸€äº›è®¡ç®—ç„¶åè¿”å›è®¡ç®—ç»“æœã€‚åœ¨å‰ä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä¸€å¥å‡½æ•°è°ƒç”¨è§†ä¸ºä¸€æ¡è¯­å¥ï¼›è€Œåœ¨åä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ™å°†å‡½æ•°è°ƒç”¨è§†ä¸ºè¡¨è¾¾å¼ï¼š\nprint(8 * 9, 9 \/ 8) a = math.sin(3) \u002b math.cos(10) print(os.date()) æ— è®ºå“ªç§æƒ…å†µï¼Œå‡½æ•°è°ƒç”¨æ—¶éƒ½éœ€è¦ä½¿ç”¨ä¸€å¯¹åœ†æ‹¬å·æŠŠå‚æ•°åˆ—è¡¨æ‹¬èµ·æ¥ã€‚å³ä½¿è¢«è°ƒç”¨çš„å‡½æ•°ä¸éœ€è¦å‚æ•°ï¼Œä¹Ÿéœ€è¦ä¸€å¯¹ç©ºæ‹¬å·()å¯¹äºè¿™ä¸ªè§„åˆ™ï¼Œå”¯ä¸€çš„ä¾‹å¤–å°±æ˜¯ï¼Œå½“å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ä¸”è¯¥å‚æ•°æ˜¯å­—ç¬¦ä¸²å¸¸é‡æˆ–è¡¨æ„é€ å™¨æ—¶ï¼Œæ‹¬å·æ˜¯å¯é€‰çš„ï¼š\nprint \u0026#34;Hello World\t\u0026lt;--\u0026gt;\tprint (\u0026#34;Hello World\u0026#34;)\rdofile \u0026#39;a.lua\u0026#39;\t\u0026lt;--\u0026gt;\tdofile (\u0026#39;a.lua\u0026#39;) print [[a multi-line\t\u0026lt;--\u0026gt;\tprint([[a multi-line message]] message]])\rf{x = 10, y = 20}\t\u0026lt;--\u0026gt;\tf({x = 10, y = 20})\rtype{}\t\u0026lt;--\u0026gt;\ttype ({}) Luaè¯­è¨€ä¹Ÿä¸ºé¢å‘å¯¹è±¡é£æ ¼çš„è°ƒç”¨ï¼ˆobject-oriented callï¼‰æä¾›äº†ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ï¼Œå³å†’å·æ“ä½œç¬¦ï¼Œå½¢å¦‚o:foo(x)çš„è¡¨è¾¾å¼æ„ä¸ºè°ƒç”¨å¯¹è±¡oçš„fooæ–¹æ³•ã€‚\nä¸€ä¸ªLuaç¨‹åºæ—¢å¯ä»¥è°ƒç”¨Luaè¯­è¨€ç¼–å†™çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨Cè¯­è¨€ï¼ˆæˆ–è€…å®¿ä¸»ç¨‹åºä½¿ç”¨çš„å…¶ä»–ä»»æ„è¯­è¨€)ç¼–å†™çš„å‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„å‡½æ•°æ¥å®ç°å¯¹æ€§èƒ½è¦æ±‚æ›´é«˜ï¼Œæˆ–ä¸å®¹æ˜“ç›´æ¥é€šè¿‡Luaè¯­è¨€è¿›è¡Œæ“ä½œçš„æ“ä½œç³»ç»Ÿæœºåˆ¶ç­‰ã€‚ä¾‹å¦‚ï¼ŒLuaè¯­è¨€æ ‡å‡†åº“ä¸­æ‰€æœ‰çš„å‡½æ•°å°±éƒ½æ˜¯ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„ã€‚\nLuaä¸­ï¼Œä¸€ä¸ªå‡½æ•°å®šä¹‰å…·æœ‰ä¸€ä¸ªå‡½æ•°åã€ä¸€ä¸ªå‚æ•°ï¼ˆparameterï¼‰ç»„æˆçš„åˆ—è¡¨å’Œç”±ä¸€ç»„è¯­å¥ç»„æˆçš„å‡½æ•°ä½“ï¼ˆbodyï¼‰ã€‚å‚æ•°çš„è¡Œä¸ºä¸å±€éƒ¨å˜é‡çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ï¼Œç›¸å½“äºä¸€ä¸ªç”¨å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å€¼è¿›è¡Œåˆå§‹åŒ–çš„å±€éƒ¨å˜é‡ã€‚\nè°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ªæ•°å¯ä»¥ä¸å®šä¹‰å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ªæ•°ä¸ä¸€è‡´ã€‚Luaè¯­è¨€ä¼šé€šè¿‡æŠ›å¼ƒå¤šä½™å‚æ•°å’Œå°†ä¸è¶³çš„å‚æ•°è®¾ä¸ºnilçš„æ–¹å¼æ¥è°ƒæ•´å‚æ•°çš„ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„å‡½æ•°ï¼š\nfunction f (a, b) print(a, b) end f()\t--\u0026gt; nil nil f(3)\t--\u0026gt; 3 nil f(3, 4)\t--\u0026gt; 3 4 f(3, 4, 5)\t--\u0026gt; 3 4 ï¼ˆ5è¢«ä¸¢å¼ƒï¼‰ è™½ç„¶è¿™ç§è¡Œä¸ºå¯èƒ½å¯¼è‡´ç¼–ç¨‹é”™è¯¯ï¼ˆåœ¨å•å…ƒæµ‹è¯•ä¸­å®¹æ˜“å‘ç°ï¼‰ï¼Œä½†åŒæ ·åˆæ˜¯æœ‰ç”¨çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºé»˜è®¤å‚æ•°ï¼ˆdefault argumentï¼‰çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹é€’å¢å…¨å±€è®¡æ•°å™¨çš„å‡½æ•°ï¼š\nfunction incCount (n) n = n or 1 globalCounter = globalCounter \u002b n end nçš„é»˜è®¤å‚æ•°æ˜¯1ï¼Œå½“è°ƒç”¨æ— å‚æ•°çš„incCountæ—¶ï¼Œå°†globalCounteråŠ 1ã€‚\n",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "2025",
      "datePublished": "2025-01-18 00:00:00 \u002b0000 UTC",
      "dateModified" : "2025-01-18 00:00:00 \u002b0000 UTC",
      "url" : "http:\/\/localhost:1313\/posts\/lua%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%A806%E5%87%BD%E6%95%B0\/",
      "keywords" : [  ]
  }
</script>
<title>
    
    Luaå­¦ä¹ ç¬”è®°ä¸¨06å‡½æ•°
  
  </title>
  <meta property="og:title" content="Luaå­¦ä¹ ç¬”è®°ä¸¨06å‡½æ•°" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="å‡½æ•°æ—¢å¯ä»¥ç”¨äºå®ŒæˆæŸç§ç‰¹å®šä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥åªæ˜¯è¿›è¡Œä¸€äº›è®¡ç®—ç„¶åè¿”å›è®¡ç®—ç»“æœã€‚åœ¨å‰ä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä¸€å¥å‡½æ•°è°ƒç”¨è§†ä¸ºä¸€æ¡è¯­å¥ï¼›è€Œåœ¨åä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ™å°†å‡½æ•°è°ƒç”¨è§†ä¸ºè¡¨è¾¾å¼ï¼š
print(8 * 9, 9 / 8) a = math.sin(3) &#43; math.cos(10) print(os.date()) æ— è®ºå“ªç§æƒ…å†µï¼Œå‡½æ•°è°ƒç”¨æ—¶éƒ½éœ€è¦ä½¿ç”¨ä¸€å¯¹åœ†æ‹¬å·æŠŠå‚æ•°åˆ—è¡¨æ‹¬èµ·æ¥ã€‚å³ä½¿è¢«è°ƒç”¨çš„å‡½æ•°ä¸éœ€è¦å‚æ•°ï¼Œä¹Ÿéœ€è¦ä¸€å¯¹ç©ºæ‹¬å·()å¯¹äºè¿™ä¸ªè§„åˆ™ï¼Œå”¯ä¸€çš„ä¾‹å¤–å°±æ˜¯ï¼Œå½“å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ä¸”è¯¥å‚æ•°æ˜¯å­—ç¬¦ä¸²å¸¸é‡æˆ–è¡¨æ„é€ å™¨æ—¶ï¼Œæ‹¬å·æ˜¯å¯é€‰çš„ï¼š
print &#34;Hello World	&lt;--&gt;	print (&#34;Hello World&#34;)dofile &#39;a.lua&#39;	&lt;--&gt;	dofile (&#39;a.lua&#39;) print [[a multi-line	&lt;--&gt;	print([[a multi-line message]] message]])f{x = 10, y = 20}	&lt;--&gt;	f({x = 10, y = 20})type{}	&lt;--&gt;	type ({}) Luaè¯­è¨€ä¹Ÿä¸ºé¢å‘å¯¹è±¡é£æ ¼çš„è°ƒç”¨ï¼ˆobject-oriented callï¼‰æä¾›äº†ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ï¼Œå³å†’å·æ“ä½œç¬¦ï¼Œå½¢å¦‚o:foo(x)çš„è¡¨è¾¾å¼æ„ä¸ºè°ƒç”¨å¯¹è±¡oçš„fooæ–¹æ³•ã€‚
ä¸€ä¸ªLuaç¨‹åºæ—¢å¯ä»¥è°ƒç”¨Luaè¯­è¨€ç¼–å†™çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨Cè¯­è¨€ï¼ˆæˆ–è€…å®¿ä¸»ç¨‹åºä½¿ç”¨çš„å…¶ä»–ä»»æ„è¯­è¨€)ç¼–å†™çš„å‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„å‡½æ•°æ¥å®ç°å¯¹æ€§èƒ½è¦æ±‚æ›´é«˜ï¼Œæˆ–ä¸å®¹æ˜“ç›´æ¥é€šè¿‡Luaè¯­è¨€è¿›è¡Œæ“ä½œçš„æ“ä½œç³»ç»Ÿæœºåˆ¶ç­‰ã€‚ä¾‹å¦‚ï¼ŒLuaè¯­è¨€æ ‡å‡†åº“ä¸­æ‰€æœ‰çš„å‡½æ•°å°±éƒ½æ˜¯ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„ã€‚
Luaä¸­ï¼Œä¸€ä¸ªå‡½æ•°å®šä¹‰å…·æœ‰ä¸€ä¸ªå‡½æ•°åã€ä¸€ä¸ªå‚æ•°ï¼ˆparameterï¼‰ç»„æˆçš„åˆ—è¡¨å’Œç”±ä¸€ç»„è¯­å¥ç»„æˆçš„å‡½æ•°ä½“ï¼ˆbodyï¼‰ã€‚å‚æ•°çš„è¡Œä¸ºä¸å±€éƒ¨å˜é‡çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ï¼Œç›¸å½“äºä¸€ä¸ªç”¨å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å€¼è¿›è¡Œåˆå§‹åŒ–çš„å±€éƒ¨å˜é‡ã€‚
è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ªæ•°å¯ä»¥ä¸å®šä¹‰å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ªæ•°ä¸ä¸€è‡´ã€‚Luaè¯­è¨€ä¼šé€šè¿‡æŠ›å¼ƒå¤šä½™å‚æ•°å’Œå°†ä¸è¶³çš„å‚æ•°è®¾ä¸ºnilçš„æ–¹å¼æ¥è°ƒæ•´å‚æ•°çš„ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„å‡½æ•°ï¼š
function f (a, b) print(a, b) end f()	--&gt; nil nil f(3)	--&gt; 3 nil f(3, 4)	--&gt; 3 4 f(3, 4, 5)	--&gt; 3 4 ï¼ˆ5è¢«ä¸¢å¼ƒï¼‰ è™½ç„¶è¿™ç§è¡Œä¸ºå¯èƒ½å¯¼è‡´ç¼–ç¨‹é”™è¯¯ï¼ˆåœ¨å•å…ƒæµ‹è¯•ä¸­å®¹æ˜“å‘ç°ï¼‰ï¼Œä½†åŒæ ·åˆæ˜¯æœ‰ç”¨çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºé»˜è®¤å‚æ•°ï¼ˆdefault argumentï¼‰çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹é€’å¢å…¨å±€è®¡æ•°å™¨çš„å‡½æ•°ï¼š
function incCount (n) n = n or 1 globalCounter = globalCounter &#43; n end nçš„é»˜è®¤å‚æ•°æ˜¯1ï¼Œå½“è°ƒç”¨æ— å‚æ•°çš„incCountæ—¶ï¼Œå°†globalCounteråŠ 1ã€‚
" />
  <meta name="description" content="å‡½æ•°æ—¢å¯ä»¥ç”¨äºå®ŒæˆæŸç§ç‰¹å®šä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥åªæ˜¯è¿›è¡Œä¸€äº›è®¡ç®—ç„¶åè¿”å›è®¡ç®—ç»“æœã€‚åœ¨å‰ä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä¸€å¥å‡½æ•°è°ƒç”¨è§†ä¸ºä¸€æ¡è¯­å¥ï¼›è€Œåœ¨åä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ™å°†å‡½æ•°è°ƒç”¨è§†ä¸ºè¡¨è¾¾å¼ï¼š
print(8 * 9, 9 / 8) a = math.sin(3) &#43; math.cos(10) print(os.date()) æ— è®ºå“ªç§æƒ…å†µï¼Œå‡½æ•°è°ƒç”¨æ—¶éƒ½éœ€è¦ä½¿ç”¨ä¸€å¯¹åœ†æ‹¬å·æŠŠå‚æ•°åˆ—è¡¨æ‹¬èµ·æ¥ã€‚å³ä½¿è¢«è°ƒç”¨çš„å‡½æ•°ä¸éœ€è¦å‚æ•°ï¼Œä¹Ÿéœ€è¦ä¸€å¯¹ç©ºæ‹¬å·()å¯¹äºè¿™ä¸ªè§„åˆ™ï¼Œå”¯ä¸€çš„ä¾‹å¤–å°±æ˜¯ï¼Œå½“å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ä¸”è¯¥å‚æ•°æ˜¯å­—ç¬¦ä¸²å¸¸é‡æˆ–è¡¨æ„é€ å™¨æ—¶ï¼Œæ‹¬å·æ˜¯å¯é€‰çš„ï¼š
print &#34;Hello World	&lt;--&gt;	print (&#34;Hello World&#34;)dofile &#39;a.lua&#39;	&lt;--&gt;	dofile (&#39;a.lua&#39;) print [[a multi-line	&lt;--&gt;	print([[a multi-line message]] message]])f{x = 10, y = 20}	&lt;--&gt;	f({x = 10, y = 20})type{}	&lt;--&gt;	type ({}) Luaè¯­è¨€ä¹Ÿä¸ºé¢å‘å¯¹è±¡é£æ ¼çš„è°ƒç”¨ï¼ˆobject-oriented callï¼‰æä¾›äº†ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ï¼Œå³å†’å·æ“ä½œç¬¦ï¼Œå½¢å¦‚o:foo(x)çš„è¡¨è¾¾å¼æ„ä¸ºè°ƒç”¨å¯¹è±¡oçš„fooæ–¹æ³•ã€‚
ä¸€ä¸ªLuaç¨‹åºæ—¢å¯ä»¥è°ƒç”¨Luaè¯­è¨€ç¼–å†™çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨Cè¯­è¨€ï¼ˆæˆ–è€…å®¿ä¸»ç¨‹åºä½¿ç”¨çš„å…¶ä»–ä»»æ„è¯­è¨€)ç¼–å†™çš„å‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„å‡½æ•°æ¥å®ç°å¯¹æ€§èƒ½è¦æ±‚æ›´é«˜ï¼Œæˆ–ä¸å®¹æ˜“ç›´æ¥é€šè¿‡Luaè¯­è¨€è¿›è¡Œæ“ä½œçš„æ“ä½œç³»ç»Ÿæœºåˆ¶ç­‰ã€‚ä¾‹å¦‚ï¼ŒLuaè¯­è¨€æ ‡å‡†åº“ä¸­æ‰€æœ‰çš„å‡½æ•°å°±éƒ½æ˜¯ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„ã€‚
Luaä¸­ï¼Œä¸€ä¸ªå‡½æ•°å®šä¹‰å…·æœ‰ä¸€ä¸ªå‡½æ•°åã€ä¸€ä¸ªå‚æ•°ï¼ˆparameterï¼‰ç»„æˆçš„åˆ—è¡¨å’Œç”±ä¸€ç»„è¯­å¥ç»„æˆçš„å‡½æ•°ä½“ï¼ˆbodyï¼‰ã€‚å‚æ•°çš„è¡Œä¸ºä¸å±€éƒ¨å˜é‡çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ï¼Œç›¸å½“äºä¸€ä¸ªç”¨å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å€¼è¿›è¡Œåˆå§‹åŒ–çš„å±€éƒ¨å˜é‡ã€‚
è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ªæ•°å¯ä»¥ä¸å®šä¹‰å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ªæ•°ä¸ä¸€è‡´ã€‚Luaè¯­è¨€ä¼šé€šè¿‡æŠ›å¼ƒå¤šä½™å‚æ•°å’Œå°†ä¸è¶³çš„å‚æ•°è®¾ä¸ºnilçš„æ–¹å¼æ¥è°ƒæ•´å‚æ•°çš„ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„å‡½æ•°ï¼š
function f (a, b) print(a, b) end f()	--&gt; nil nil f(3)	--&gt; 3 nil f(3, 4)	--&gt; 3 4 f(3, 4, 5)	--&gt; 3 4 ï¼ˆ5è¢«ä¸¢å¼ƒï¼‰ è™½ç„¶è¿™ç§è¡Œä¸ºå¯èƒ½å¯¼è‡´ç¼–ç¨‹é”™è¯¯ï¼ˆåœ¨å•å…ƒæµ‹è¯•ä¸­å®¹æ˜“å‘ç°ï¼‰ï¼Œä½†åŒæ ·åˆæ˜¯æœ‰ç”¨çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºé»˜è®¤å‚æ•°ï¼ˆdefault argumentï¼‰çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹é€’å¢å…¨å±€è®¡æ•°å™¨çš„å‡½æ•°ï¼š
function incCount (n) n = n or 1 globalCounter = globalCounter &#43; n end nçš„é»˜è®¤å‚æ•°æ˜¯1ï¼Œå½“è°ƒç”¨æ— å‚æ•°çš„incCountæ—¶ï¼Œå°†globalCounteråŠ 1ã€‚
" />
  <meta property="og:locale" content="cn" /><meta property="og:image" content="/favicon.png" />
  

  
    <style>@import '/fonts/lxgw-wenkai-screen-webfont/style.css';body{font-family:lxgw wenkai screen,sans-serif;-webkit-font-smoothing:antialiased;margin:0 20px}article{max-width:800px;margin-left:auto;margin-right:auto}a{color:#000;text-decoration:none!important}a:hover{text-decoration:underline!important}table{width:100%;border-collapse:collapse;border:2px solid #000}th,td{text-align:center;vertical-align:middle;border:2px solid #000;padding:10px}p{}details{background-color:#f0f0f0;border:0 solid #1e90ff;border-radius:20px;padding:10px}details[open]{background-color:#f0f0f0}summary{font-size:20px;font-weight:700;color:#000;cursor:pointer;transition:color .3s ease}summary:hover{color:#ff4500}.highlight{position:relative}button{appearance:auto;text-rendering:auto;color:buttontext;letter-spacing:normal;word-spacing:normal;line-height:normal;text-transform:none;text-indent:0;text-shadow:none;display:inline-block;text-align:center;align-items:flex-start;cursor:default;box-sizing:border-box;background-color:buttonface;margin:0;padding-block:1px;padding-inline:6px;border-width:2px;border-style:outset;border-color:buttonborder;border-image:initial}.copy-button{display:none;position:absolute;top:10px;right:10px;padding:5px 10px;font-size:.8em;color:#fff;background-color:#008b8b;border:none;border-radius:4px;box-shadow:0 2px 5px rgba(0,0,0,.2);transition:background-color .3s ease}.copy-button:hover{background-color:#cd3bee}.highlight:hover .copy-button{display:inline-block}.post-ads{color:#00f;margin:50px 0}.markdown-body{font-size:18px;max-width:100%}.markdown-body a{text-decoration:underline;text-decoration-color:#000}.markdown-body blockquote{margin:0;padding:0 1em;color:#57606a;border-left:.25em solid #d0d7de}.markdown-body pre{padding:16px;overflow:auto;border-radius:10px}.markdown-body code{padding:.2em .4em;font-size:85%;background-color:#f6f8fa;border-radius:6px}.markdown-body pre>code{padding:0;font-size:100%;background-color:inherit;border:0}.Chinese .markdown-body{line-height:200%}.header-main{display:flex;padding:5px 0;justify-content:flex-start}.header-avatar img{width:113px;height:125px;border-radius:50%;margin-right:10px}.site-date-catalog{font-family:lxgw wenkai screen,sans-serif;font-size:2rem;color:blue}.header-title{font-family:lxgw wenkai screen,sans-serif;font-size:2rem;font-weight:700;margin-top:32px}.header-title a{text-decoration:none}.header-subtitle{color:#c557a2;font-size:1.3rem;font-weight:700}.header-items{margin:5px 0}.header-item{margin:0 5px}.header-line{width:100%;border-width:2px;border-color:#482936;border-style:solid none none none}.header-content{display:flex;align-items:center}.lang-switch{font-weight:900}#posts-list{min-height:600px}.posts-line{font-size:1.2rem;margin:12px 0}.posts-categories{font-size:.8rem;margin:auto;text-align:center}.posts-category{padding:3px 0;border:#000 2px solid;border-radius:5px}.site-footer{margin-top:50px}.site-footer-item{margin-right:12px}pre{background-color:#f5f2f0;padding:5px;font-family:lxgw wenkai screen,sans-serif;font-size:18px;margin-bottom:18px margin-left:0px margin-right:0px margin-top:18px padding-top:16px padding-bottom:16px padding-left:16px padding-right:16px white-space:pre-wrap;word-wrap:break-word;overflow-x:auto;overflow-y:auto;-webkit-font-smoothing:antialiased}code{font-family:Consolas,Monaco,andale mono,ubuntu mono,monospace}.post-header{margin-bottom:50px;font-weight:900}.post-title{font-size:2rem;font-weight:900}.post-tags{display:inline;font-weight:900;padding:2px 5px;margin-right:6px;border:#000 2px solid;border-radius:5px}.post-date{font-weight:900;font-style:italic}.post-author{float:right;font-weight:900}.page-content{min-height:60%}.post-content{margin-bottom:50px}.post-content p{hyphens:auto;line-height:1.8;text-justify:ideographic;margin-bottom:1em}.post-content img{max-width:100%;display:block;margin-right:auto;margin-top:6px}.post-content .post-gallery{display:flex;flex-wrap:wrap;gap:6px}.post-content .post-gallery img{margin-right:auto;margin-top:auto;width:calc(50% - 3px)}.related-content{border-width:3px;border-style:solid;border-color:#000;padding:0 10px;margin-bottom:50px;margin-top:100px}.related-content li{margin:5px 0}.taxonomy-term{font-size:3rem}.gallery-img{text-align:center}.gallery-img span{text-align:center}.gallery-img-desc{font-size:.8em;font-weight:800}#disqus_thread{position:relative}#disqus_thread:after{content:"";display:block;height:55px;width:100%;position:absolute;bottom:0;background:#fff}@media screen and (max-width:600px){.header-title,.header-subtitle,.header-items{}.posts-line{font-size:16px}.markdown-body{font-size:18px;max-width:100%}.post-title{font-size:2rem;font-weight:900}.post-content p{letter-spacing:.05em}.post-content .post-gallery img{width:100%}}@media screen and (max-width:48em){.posts-category{display:none}}.language-css.token.string,.style.token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:0 0!important}</style>
  
  
    <style>.container,.container-fluid{margin-right:auto;margin-left:auto}.container-fluid{padding-right:2rem;padding-left:2rem}.row{box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 1 auto;flex:initial;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-.5rem;margin-left:-.5rem}.row.reverse{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.col.reverse{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.col-xs,.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-offset-0,.col-xs-offset-1,.col-xs-offset-10,.col-xs-offset-11,.col-xs-offset-12,.col-xs-offset-2,.col-xs-offset-3,.col-xs-offset-4,.col-xs-offset-5,.col-xs-offset-6,.col-xs-offset-7,.col-xs-offset-8,.col-xs-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-xs{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-xs-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-xs-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-xs-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-xs-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-xs-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-xs-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-xs-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-xs-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-xs-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-xs-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-xs-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-xs-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-xs-offset-0{margin-left:0}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-11{margin-left:91.66666667%}.start-xs{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-xs{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-xs{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-xs{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-xs{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-xs{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-xs{-ms-flex-pack:distribute;justify-content:space-around}.between-xs{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-xs{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-xs{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}@media only screen and (min-width:48em){.container{width:49rem}.col-sm,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-offset-0,.col-sm-offset-1,.col-sm-offset-10,.col-sm-offset-11,.col-sm-offset-12,.col-sm-offset-2,.col-sm-offset-3,.col-sm-offset-4,.col-sm-offset-5,.col-sm-offset-6,.col-sm-offset-7,.col-sm-offset-8,.col-sm-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-sm{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-sm-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-sm-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-sm-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-sm-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-sm-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-sm-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-sm-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-sm-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-sm-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-sm-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-sm-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-sm-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-sm-offset-0{margin-left:0}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-11{margin-left:91.66666667%}.start-sm{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-sm{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-sm{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-sm{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-sm{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-sm{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-sm{-ms-flex-pack:distribute;justify-content:space-around}.between-sm{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-sm{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-sm{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}}@media only screen and (min-width:64em){.container{width:65rem}.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-offset-0,.col-md-offset-1,.col-md-offset-10,.col-md-offset-11,.col-md-offset-12,.col-md-offset-2,.col-md-offset-3,.col-md-offset-4,.col-md-offset-5,.col-md-offset-6,.col-md-offset-7,.col-md-offset-8,.col-md-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-md{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-md-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-md-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-md-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-md-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-md-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-md-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-md-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-md-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-md-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-md-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-md-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-md-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-md-offset-0{margin-left:0}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-3{margin-left:25%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-6{margin-left:50%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-9{margin-left:75%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-11{margin-left:91.66666667%}.start-md{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-md{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-md{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-md{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-md{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-md{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-md{-ms-flex-pack:distribute;justify-content:space-around}.between-md{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-md{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-md{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}}@media only screen and (min-width:75em){.container{width:76rem}.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-offset-0,.col-lg-offset-1,.col-lg-offset-10,.col-lg-offset-11,.col-lg-offset-12,.col-lg-offset-2,.col-lg-offset-3,.col-lg-offset-4,.col-lg-offset-5,.col-lg-offset-6,.col-lg-offset-7,.col-lg-offset-8,.col-lg-offset-9{box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:none;padding-right:.5rem;padding-left:.5rem}.col-lg{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-lg-1{-ms-flex-preferred-size:8.33333333%;flex-basis:8.33333333%;max-width:8.33333333%}.col-lg-2{-ms-flex-preferred-size:16.66666667%;flex-basis:16.66666667%;max-width:16.66666667%}.col-lg-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-lg-4{-ms-flex-preferred-size:33.33333333%;flex-basis:33.33333333%;max-width:33.33333333%}.col-lg-5{-ms-flex-preferred-size:41.66666667%;flex-basis:41.66666667%;max-width:41.66666667%}.col-lg-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-lg-7{-ms-flex-preferred-size:58.33333333%;flex-basis:58.33333333%;max-width:58.33333333%}.col-lg-8{-ms-flex-preferred-size:66.66666667%;flex-basis:66.66666667%;max-width:66.66666667%}.col-lg-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-lg-10{-ms-flex-preferred-size:83.33333333%;flex-basis:83.33333333%;max-width:83.33333333%}.col-lg-11{-ms-flex-preferred-size:91.66666667%;flex-basis:91.66666667%;max-width:91.66666667%}.col-lg-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}.col-lg-offset-0{margin-left:0}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-11{margin-left:91.66666667%}.start-lg{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:start}.center-lg{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center}.end-lg{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;text-align:end}.top-lg{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.middle-lg{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.bottom-lg{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.around-lg{-ms-flex-pack:distribute;justify-content:space-around}.between-lg{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.first-lg{-webkit-box-ordinal-group:0;-ms-flex-order:-1;order:-1}.last-lg{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}}</style>
  

  

  <link href="/index.xml" rel="alternate" type="application/rss+xml"
    title="å­æ˜¥å»¿ä¸€">
  
  

<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<script>
  function addDarkmodeWidget() {
    new Darkmode().showWidget();
  }
  window.addEventListener('load', addDarkmodeWidget);
</script>

  
  
</head>


<body>
  <article class="post Chinese" id="article">
    <div class="row">
      <div class="col-xs-12">
        <div class="site-header">
          
<header class="header-main">
	<div class="header-content">
		<div class="header-avatar">
		<img src="/%e5%a4%b4%e5%83%8f.jpg" />
		</div>
		<div class="header-title">
			<a href="/">å­æ˜¥å»¿ä¸€</a>
			<div class="header-subtitle">ä¸­æ„èƒ¡æ¢“æ‚¦å¤§ç‹ğŸ’–</div> 
		</div>
	</div>
</header>
<div class="row end-md header-items">
  
  <div class="header-item">
    <a href="/categories/index.html" >åˆ†ç±»</a>
  </div>
  
</div>
<div class="row">
   
</div>
<div class="header-line"></div>

        </div>
        <header class="post-header">
          <h1 class="post-title">Luaå­¦ä¹ ç¬”è®°ä¸¨06å‡½æ•°</h1>
          
          <div class="row post-desc">
            <div class="col-xs-6">
              
              <time class="post-date" datetime="2025-01-18 00:00:00 UTC">
                18 Jan 2025
              </time>
              
            </div>
            <div class="col-xs-6">
              
            </div>
          </div>
          
        </header>

        <div class="post-content markdown-body">
          
          <p>å‡½æ•°æ—¢å¯ä»¥ç”¨äºå®ŒæˆæŸç§ç‰¹å®šä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥åªæ˜¯è¿›è¡Œä¸€äº›è®¡ç®—ç„¶åè¿”å›è®¡ç®—ç»“æœã€‚åœ¨å‰ä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä¸€å¥å‡½æ•°è°ƒç”¨è§†ä¸ºä¸€æ¡è¯­å¥ï¼›è€Œåœ¨åä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ™å°†å‡½æ•°è°ƒç”¨è§†ä¸ºè¡¨è¾¾å¼ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>print(<span style="color:#ae81ff">8</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">9</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">8</span>)
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> math.sin(<span style="color:#ae81ff">3</span>) <span style="color:#f92672">+</span> math.cos(<span style="color:#ae81ff">10</span>) 
</span></span><span style="display:flex;"><span>print(os.date())
</span></span></code></pre></div><p>æ— è®ºå“ªç§æƒ…å†µï¼Œå‡½æ•°è°ƒç”¨æ—¶éƒ½éœ€è¦ä½¿ç”¨ä¸€å¯¹åœ†æ‹¬å·æŠŠå‚æ•°åˆ—è¡¨æ‹¬èµ·æ¥ã€‚å³ä½¿è¢«è°ƒç”¨çš„å‡½æ•°ä¸éœ€è¦å‚æ•°ï¼Œä¹Ÿéœ€è¦ä¸€å¯¹ç©ºæ‹¬å·()å¯¹äºè¿™ä¸ªè§„åˆ™ï¼Œå”¯ä¸€çš„ä¾‹å¤–å°±æ˜¯ï¼Œå½“å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ä¸”è¯¥å‚æ•°æ˜¯å­—ç¬¦ä¸²å¸¸é‡æˆ–è¡¨æ„é€ å™¨æ—¶ï¼Œæ‹¬å·æ˜¯å¯é€‰çš„ï¼š</p>
<pre tabindex="0"><code>print &#34;Hello World	&lt;--&gt;	print (&#34;Hello World&#34;)
dofile &#39;a.lua&#39;		&lt;--&gt;	dofile (&#39;a.lua&#39;) 
print [[a multi-line	&lt;--&gt;	print([[a multi-line 
 message]] 			 message]])
f{x = 10, y = 20}	&lt;--&gt;	f({x = 10, y = 20})
type{}			&lt;--&gt;	type ({})
</code></pre><p>Luaè¯­è¨€ä¹Ÿä¸ºé¢å‘å¯¹è±¡é£æ ¼çš„è°ƒç”¨ï¼ˆobject-oriented callï¼‰æä¾›äº†ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ï¼Œå³å†’å·æ“ä½œç¬¦ï¼Œå½¢å¦‚o:foo(x)çš„è¡¨è¾¾å¼æ„ä¸ºè°ƒç”¨å¯¹è±¡oçš„fooæ–¹æ³•ã€‚</p>
<p>ä¸€ä¸ªLuaç¨‹åºæ—¢å¯ä»¥è°ƒç”¨Luaè¯­è¨€ç¼–å†™çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨Cè¯­è¨€ï¼ˆæˆ–è€…å®¿ä¸»ç¨‹åºä½¿ç”¨çš„å…¶ä»–ä»»æ„è¯­è¨€)ç¼–å†™çš„å‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„å‡½æ•°æ¥å®ç°å¯¹æ€§èƒ½è¦æ±‚æ›´é«˜ï¼Œæˆ–ä¸å®¹æ˜“ç›´æ¥é€šè¿‡Luaè¯­è¨€è¿›è¡Œæ“ä½œçš„æ“ä½œç³»ç»Ÿæœºåˆ¶ç­‰ã€‚ä¾‹å¦‚ï¼ŒLuaè¯­è¨€æ ‡å‡†åº“ä¸­æ‰€æœ‰çš„å‡½æ•°å°±éƒ½æ˜¯ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„ã€‚</p>
<p>Luaä¸­ï¼Œä¸€ä¸ªå‡½æ•°å®šä¹‰å…·æœ‰ä¸€ä¸ªå‡½æ•°åã€ä¸€ä¸ªå‚æ•°ï¼ˆparameterï¼‰ç»„æˆçš„åˆ—è¡¨å’Œç”±ä¸€ç»„è¯­å¥ç»„æˆçš„å‡½æ•°ä½“ï¼ˆbodyï¼‰ã€‚å‚æ•°çš„è¡Œä¸ºä¸å±€éƒ¨å˜é‡çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ï¼Œç›¸å½“äºä¸€ä¸ªç”¨å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å€¼è¿›è¡Œåˆå§‹åŒ–çš„å±€éƒ¨å˜é‡ã€‚</p>
<p>è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ªæ•°å¯ä»¥ä¸å®šä¹‰å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•°ä¸ªæ•°ä¸ä¸€è‡´ã€‚Luaè¯­è¨€ä¼šé€šè¿‡æŠ›å¼ƒå¤šä½™å‚æ•°å’Œå°†ä¸è¶³çš„å‚æ•°è®¾ä¸ºnilçš„æ–¹å¼æ¥è°ƒæ•´å‚æ•°çš„ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„å‡½æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">f</span> (a, b) print(a, b) <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>f()				<span style="color:#75715e">--&gt; nil nil </span>
</span></span><span style="display:flex;"><span>f(<span style="color:#ae81ff">3</span>)			<span style="color:#75715e">--&gt; 3 nil </span>
</span></span><span style="display:flex;"><span>f(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)			<span style="color:#75715e">--&gt; 3 4 </span>
</span></span><span style="display:flex;"><span>f(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>)		<span style="color:#75715e">--&gt; 3 4 ï¼ˆ5è¢«ä¸¢å¼ƒï¼‰</span>
</span></span></code></pre></div><p>è™½ç„¶è¿™ç§è¡Œä¸ºå¯èƒ½å¯¼è‡´ç¼–ç¨‹é”™è¯¯ï¼ˆåœ¨å•å…ƒæµ‹è¯•ä¸­å®¹æ˜“å‘ç°ï¼‰ï¼Œä½†åŒæ ·åˆæ˜¯æœ‰ç”¨çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºé»˜è®¤å‚æ•°ï¼ˆdefault argumentï¼‰çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹é€’å¢å…¨å±€è®¡æ•°å™¨çš„å‡½æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">incCount</span> (n)
</span></span><span style="display:flex;"><span>	n <span style="color:#f92672">=</span> n <span style="color:#f92672">or</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>	globalCounter <span style="color:#f92672">=</span> globalCounter <span style="color:#f92672">+</span> n
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>nçš„é»˜è®¤å‚æ•°æ˜¯1ï¼Œå½“è°ƒç”¨æ— å‚æ•°çš„incCountæ—¶ï¼Œå°†globalCounteråŠ 1ã€‚</p>
<h2 id="61-å¤šè¿”å›å€¼">6.1 å¤šè¿”å›å€¼</h2>
<p>Luaè¯­è¨€ä¸­ä¸€ç§ç‰¹æ€§æ˜¯å…è®¸ä¸€ä¸ªå‡½æ•°è¿”å›å¤šä¸ªç»“æœ(Multiple Results)ã€‚Luaè¯­è¨€ä¸­æœ‰å‡ ä¸ªé¢„å®šä¹‰å‡½æ•°å°±ä¼šè¿”å›å¤šä¸ªå€¼ã€‚æˆ‘ä»¬å·²ç»æ¥è§¦è¿‡å‡½æ•°strinã€,find,è¯¥å‡½æ•°ç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­å®šä½æ¨¡å¼(pattern)ã€‚å½“æ‰¾åˆ°äº†å¯¹åº”çš„æ¨¡å¼æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸¤ä¸ªç´¢å¼•å€¼ï¼šæ‰€åŒ¹é…æ¨¡å¼åœ¨å­—ç¬¦ä¸²ä¸­èµ·å§‹å­—ç¬¦å’Œç»“å°¾å­—ç¬¦çš„ç´¢å¼•ã€‚ä½¿ç”¨å¤šé‡èµ‹å€¼(multiple assignment)å¯ä»¥åŒæ—¶è·å–åˆ°è¿™ä¸¤ä¸ªç»“æœï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>s, e <span style="color:#f92672">=</span> string.find(<span style="color:#e6db74">&#34;hello Lua users&#34;</span>, <span style="color:#e6db74">&#34;Lua&#34;</span>)
</span></span><span style="display:flex;"><span>print(s, e)		<span style="color:#75715e">--&gt; 7 9</span>
</span></span></code></pre></div><p>Luaè¯­è¨€ç¼–å†™çš„å‡½æ•°åŒæ ·å¯ä»¥è¿”å›å¤šä¸ªç»“æœï¼Œåªéœ€åœ¨returnå…³é”®å­—ååˆ—å‡ºæ‰€æœ‰è¦è¿”å›çš„å€¼å³å¯ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨äºæŸ¥æ‰¾åºåˆ—ä¸­æœ€å¤§å…ƒç´ çš„å‡½æ•°å¯ä»¥åŒæ—¶è¿”å›æœ€å¤§å€¼åŠè¯¥å…ƒç´ çš„ä½ç½®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">maximum</span> (a)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">local</span> mi <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>		<span style="color:#75715e">-- æœ€å¤§å€¼çš„ç´¢å¼•</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">local</span> m <span style="color:#f92672">=</span> a[mi]		<span style="color:#75715e">-- æœ€å¤§å€¼</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, <span style="color:#f92672">#</span>a <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> a[i] <span style="color:#f92672">&gt;</span> m <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>			mi <span style="color:#f92672">=</span> i; m <span style="color:#f92672">=</span> a[i]
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> m, mi		<span style="color:#75715e">-- è¿”å›æœ€å¤§å€¼åŠå…¶ç´¢å¼•</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>Luaè¯­è¨€æ ¹æ®å‡½æ•°çš„è¢«è°ƒç”¨æƒ…å†µè°ƒæ•´è¿”å›å€¼çš„æ•°é‡ã€‚å½“å‡½æ•°è¢«ä½œä¸ºä¸€æ¡å•ç‹¬è¯­å¥è°ƒç”¨æ—¶ï¼Œå…¶æ‰€æœ‰è¿”å›å€¼éƒ½ä¼šè¢«ä¸¢å¼ƒï¼›å½“å‡½æ•°è¢«ä½œä¸ºè¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ï¼ŒåŠ æ³•çš„æ“ä½œæ•°ï¼‰è°ƒç”¨æ—¶ï¼Œå°†åªä¿ç•™å‡½æ•°çš„ç¬¬ä¸€ä¸ªè¿”å›å€¼ã€‚åªæœ‰å½“å‡½æ•°è°ƒç”¨æ˜¯ä¸€ç³»åˆ—è¡¨è¾¾å¼ä¸­çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆæˆ–æ˜¯å”¯ä¸€ä¸€ä¸ªè¡¨è¾¾å¼ï¼‰æ—¶ï¼Œå…¶æ‰€æœ‰çš„è¿”å›å€¼æ‰èƒ½è¢«è·å–åˆ°ã€‚è¿™é‡Œæ‰€è°“çš„â€œä¸€ç³»åˆ—è¡¨è¾¾å¼â€åœ¨Luaä¸­è¡¨ç°ä¸º4ç§æƒ…å†µï¼šå¤šé‡èµ‹å€¼ã€å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å®å‚åˆ—è¡¨ã€è¡¨æ„é€ å™¨å’Œreturnè¯­å¥ã€‚ä¸ºäº†åˆ†åˆ«å±•ç¤ºè¿™å‡ ç§æƒ…å†µï¼Œæ¥ä¸‹æ¥ä¸¾å‡ ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">foo0</span> () <span style="color:#66d9ef">end</span>					<span style="color:#75715e">-- ä¸è¿”å›ç»“æœ</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">foo1</span> () <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;a&#34;</span> <span style="color:#66d9ef">end</span>			<span style="color:#75715e">-- è¿”å›ä¸€ä¸ªç»“æœ</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">foo1</span> () <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span> <span style="color:#66d9ef">end</span>	<span style="color:#75715e">-- è¿”å›ä¸¤ä¸ªç»“æœ</span>
</span></span></code></pre></div><p>é¦–å…ˆæ˜¯å¤šé‡èµ‹å€¼ï¼Œä¸€ä¸ªå‡½æ•°è°ƒç”¨æ˜¯ä¸€ç³»åˆ—è¡¨è¾¾å¼ä¸­çš„æœ€åï¼ˆæˆ–è€…å”¯ä¸€ï¼‰ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¯¥å‡½æ•°è°ƒç”¨å°†äº§ç”Ÿå°½å¯èƒ½å¤šçš„è¿”å›å€¼æ¥åŒ¹é…å¾…èµ‹å€¼å˜é‡ï¼Œè‹¥ä¸å¤Ÿä¼šç”¨nilæ¥è¡¥å……ï¼Œå¹¶ä¸”ä¸æ»¡è¶³æ—¶åªä¼šäº§ç”Ÿä¸€ä¸ªè¿”å›å€¼ï¼ˆç¬¬ä¸€ä¸ªæˆ–nilï¼ˆæ— è¿”å›å€¼ï¼‰ï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>x, y <span style="color:#f92672">=</span> foo2()				<span style="color:#75715e">-- x = &#34;a&#34;, y = &#34;b&#34;</span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> foo2()					<span style="color:#75715e">-- x = &#34;a&#34;, &#34;b&#34;è¢«ä¸¢å¼ƒ</span>
</span></span><span style="display:flex;"><span>x, y, z <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, foo2()		<span style="color:#75715e">-- x = 10, y = &#34;a&#34;, z = &#34;b&#34;</span>
</span></span><span style="display:flex;"><span>x, y <span style="color:#f92672">=</span> foo0()				<span style="color:#75715e">-- x = nil, y = nil</span>
</span></span><span style="display:flex;"><span>x, y <span style="color:#f92672">=</span> foo1()				<span style="color:#75715e">-- x = &#34;a&#34;, y = nil</span>
</span></span><span style="display:flex;"><span>x, y, z <span style="color:#f92672">=</span> foo2()			<span style="color:#75715e">-- x = &#34;a&#34;, y = &#34;b&#34;, z = nil</span>
</span></span><span style="display:flex;"><span>x, y <span style="color:#f92672">=</span> foo2(), <span style="color:#ae81ff">20</span>			<span style="color:#75715e">-- x = &#34;a&#34;, y = 20 (&#34;b&#34;è¢«ä¸¢å¼ƒ)</span>
</span></span><span style="display:flex;"><span>x, y <span style="color:#f92672">=</span> foo2(), <span style="color:#ae81ff">20</span><span style="color:#960050;background-color:#1e0010">ï¼Œ</span> <span style="color:#ae81ff">30</span>		<span style="color:#75715e">-- x = &#34;a&#34;, y = 20 (30è¢«ä¸¢å¼ƒ)</span>
</span></span></code></pre></div><p>å…¶æ¬¡æ˜¯å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å®å‚åˆ—è¡¨ï¼Œå½“ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ˜¯å¦ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„æœ€åä¸€ä¸ªï¼ˆæˆ–è€…æ˜¯å”¯ä¸€ï¼‰å®å‚æ—¶ï¼Œå‚æ•°ä¸­å‡½æ•°çš„æ‰€æœ‰è¿”å›å€¼éƒ½ä¼šè¢«ä½œä¸ºå®å‚ä¼ ç»™ç¬¬äºŒä¸ªå‡½æ•°ã€‚æˆ‘ä»¬å·²ç»è§åˆ°è¿‡å¾ˆå¤šè¿™æ ·çš„ä»£ç ç»“æ„ï¼Œä¾‹å¦‚å‡½æ•° printã€‚ç”±äºå‡½æ•°printèƒ½å¤Ÿæ¥æ”¶å¯å˜æ•°é‡çš„å‚æ•°ï¼Œæ‰€ä»¥print(g())ä¼šæ‰“å°å‡ºgè¿”å›çš„æ‰€æœ‰ç»“æœã€‚</p>
<p>å½“æˆ‘ä»¬è°ƒç”¨f(g())æ—¶ï¼Œå¦‚æœfçš„å‚æ•°æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆLuaè¯­è¨€ä¼šæŠŠgè¿”å›å€¼çš„ä¸ªæ•°è°ƒæ•´æˆä¸fçš„å‚æ•°ä¸ªæ•°ä¸€è‡´ã€‚è¿™å¹¶éå·§åˆï¼Œå®é™…ä¸Šè¿™æ­£æ˜¯å¤šé‡èµ‹å€¼çš„é€»è¾‘ã€‚</p>
<p>æ¥ç€æ˜¯è¡¨æ„é€ å™¨ï¼Œè¡¨æ„é€ å™¨ä¼šå®Œæ•´åœ°æ¥æ”¶å‡½æ•°è°ƒç”¨çš„æ‰€æœ‰è¿”å›å€¼ï¼Œè€Œä¸ä¼šè°ƒæ•´è¿”å›å€¼çš„ä¸ªæ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>t <span style="color:#f92672">=</span> {foo0()}		<span style="color:#75715e">-- t = {} ï¼ˆä¸€ä¸ªç©ºè¡¨ï¼‰</span>
</span></span><span style="display:flex;"><span>t <span style="color:#f92672">=</span> {foo1()}		<span style="color:#75715e">-- t = {&#34;a&#34;}</span>
</span></span><span style="display:flex;"><span>t <span style="color:#f92672">=</span> {foo2()}		<span style="color:#75715e">-- t = {&#34;a&#34;, &#34;b&#34;}</span>
</span></span></code></pre></div><p>ä¸è¿‡ï¼Œè¿™ç§è¡Œä¸ºä¾æ—§è¦æ»¡è¶³å½“å‡½æ•°è°ƒç”¨æ˜¯è¡¨è¾¾å¼åˆ—è¡¨ä¸­çš„æœ€åï¼ˆæˆ–è€…å”¯ä¸€ï¼‰ä¸€ä¸ªæ—¶æ‰æœ‰æ•ˆï¼Œåœ¨å…¶ä»–ä½ç½®æ€»åªè¿”å›ä¸€ä¸ªç»“æœã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>t <span style="color:#f92672">=</span> {foo0(), foo2(), <span style="color:#ae81ff">4</span>}		<span style="color:#75715e">-- t = {nil, &#34;a&#34;, 4}</span>
</span></span></code></pre></div><p>æœ€åæ˜¯returnè¯­å¥ï¼Œå½¢å¦‚return f()çš„è¯­å¥ä¼šè¿”å›fè¿”å›çš„æ‰€æœ‰ç»“æœï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">foo</span> (i)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">then</span> <span style="color:#66d9ef">return</span> foo0()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elseif</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">then</span> <span style="color:#66d9ef">return</span> foo1()
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">elseif</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span> <span style="color:#66d9ef">then</span> <span style="color:#66d9ef">return</span> foo2()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(foo(<span style="color:#ae81ff">1</span>))	<span style="color:#75715e">--&gt; a</span>
</span></span><span style="display:flex;"><span>print(foo(<span style="color:#ae81ff">2</span>))	<span style="color:#75715e">--&gt; a b</span>
</span></span><span style="display:flex;"><span>print(foo(<span style="color:#ae81ff">0</span>))	<span style="color:#75715e">--&gt; æ— ç»“æœ</span>
</span></span><span style="display:flex;"><span>print(foo(<span style="color:#ae81ff">3</span>))	<span style="color:#75715e">--&gt; æ— ç»“æœ</span>
</span></span></code></pre></div><p>å°†å‡½æ•°è°ƒç”¨ç”¨ä¸€å¯¹åœ†æ‹¬å·æ‹¬èµ·æ¥å¯ä»¥å¼ºåˆ¶å…¶åªè¿”å›ä¸€ä¸ªç»“æœï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>print((foo0()))		<span style="color:#75715e">--&gt; nil</span>
</span></span><span style="display:flex;"><span>print((foo1()))		<span style="color:#75715e">--&gt; a</span>
</span></span><span style="display:flex;"><span>print((foo2()))		<span style="color:#75715e">--&gt; a</span>
</span></span></code></pre></div><p>å› æ­¤ï¼Œæ— è®ºfè¿”å›å‡ ä¸ªå€¼ï¼Œreturn (f(x))åªè¿”å›ä¸€ä¸ªå€¼ã€‚</p>
<h2 id="62-å¯å˜é•¿å‚æ•°å‡½æ•°">6.2 å¯å˜é•¿å‚æ•°å‡½æ•°</h2>
<p>Luaè¯­è¨€ä¸­çš„å‡½æ•°å¯ä»¥æ˜¯å¯å˜é•¿å‚æ•°å‡½æ•°ï¼ˆvariadicï¼‰ï¼Œå³å¯ä»¥æ”¯æŒæ•°é‡å¯å˜çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨ä¸€ä¸ªã€ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªå‚æ•°è°ƒç”¨è¿‡å‡½æ•°printã€‚è™½ç„¶å‡½æ•°printæ˜¯åœ¨Cè¯­è¨€ä¸­å®šä¹‰çš„ï¼Œä½†ä¹Ÿå¯ä»¥åœ¨Luaè¯­è¨€ä¸­å®šä¹‰å¯å˜é•¿å‚æ•°å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œè¯¥å‡½æ•°è¿”å›æ‰€æœ‰å‚æ•°çš„æ€»å’Œï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span> (...)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">local</span> s <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> _, v <span style="color:#66d9ef">in</span> ipairs{...} <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>        s <span style="color:#f92672">=</span> s <span style="color:#f92672">+</span> v
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> s
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(add(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">25</span>, <span style="color:#ae81ff">12</span>))		<span style="color:#75715e">--&gt; 54</span>
</span></span></code></pre></div><p>å‚æ•°åˆ—è¡¨ä¸­çš„ä¸‰ä¸ªç‚¹(&hellip;)è¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°æ˜¯å¯å˜é•¿çš„ã€‚å½“è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼ŒLuaå†…éƒ¨ä¼šæŠŠå®ƒçš„æ‰€æœ‰å‚æ•°æ”¶é›†èµ·æ¥ï¼Œæˆ‘ä»¬æŠŠè¿™äº›è¢«æ”¶é›†èµ·æ¥çš„å‚æ•°ç§°ä¸ºå‡½æ•°çš„é¢å¤–å‚æ•°ï¼ˆextra argument)ã€‚å½“å‡½æ•°è¦è®¿é—®è¿™äº›å‚æ•°æ—¶ä»éœ€ç”¨åˆ°ä¸‰ä¸ªç‚¹ï¼Œä½†ä¸åŒçš„æ˜¯æ­¤æ—¶è¿™ä¸‰ä¸ªç‚¹æ˜¯ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼æ¥ä½¿ç”¨çš„ã€‚åœ¨ä¸Šä¾‹ä¸­ï¼Œè¡¨è¾¾å¼{&hellip;}çš„ç»“æœæ˜¯ä¸€ä¸ªç”±æ‰€æœ‰å¯å˜é•¿å‚æ•°ç»„æˆçš„åˆ—è¡¨ï¼Œè¯¥å‡½æ•°ä¼šéå†è¯¥åˆ—è¡¨æ¥ç´¯åŠ å…¶ä¸­çš„å…ƒç´ ã€‚æˆ‘ä»¬å°†ä¸‰ä¸ªç‚¹ç»„æˆçš„è¡¨è¾¾å¼ç§°ä¸ºå¯å˜é•¿å‚æ•°è¡¨è¾¾å¼ï¼ˆvararg expressionï¼‰ï¼Œå…¶è¡Œä¸ºç±»ä¼¼äºä¸€ä¸ªå…·æœ‰å¤šä¸ªè¿”å›å€¼çš„å‡½æ•°ï¼Œè¿”å›çš„æ˜¯å½“å‰å‡½æ•°çš„æ‰€æœ‰å¯å˜é•¿å‚æ•°ã€‚ä¾‹å¦‚ï¼Œprint(&hellip;)ä¼šæ‰“å°å‡ºè¯¥å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚åˆå¦‚ï¼Œå¦‚ä¸‹çš„ä»£ç åˆ›å»ºäº†ä¸¤ä¸ªå±€éƒ¨å˜é‡ï¼Œå…¶å€¼ä¸º&hellip;ä¸­å‰ä¸¤ä¸ªå¯é€‰çš„å‚æ•°ï¼ˆå¦‚æœä¸å­˜åœ¨åˆ™ä¸ºnilï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">local</span> a, b <span style="color:#f92672">=</span> ...
</span></span></code></pre></div><p>å®é™…ä¸Šï¼Œå¯ä»¥é€šè¿‡å˜é•¿å‚æ•°æ¥æ¨¡æ‹ŸLuaè¯­è¨€ä¸­æ™®é€šçš„å‚æ•°ä¼ é€’æœºåˆ¶ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">foo</span> (a,b,c)
</span></span></code></pre></div><p>å¯ä»¥å†™æˆï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">foo</span> (...)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">local</span> a, b, c <span style="color:#f92672">=</span> ...
</span></span></code></pre></div><p>å½¢å¦‚ä¸‹ä¾‹çš„å‡½æ•°åªæ˜¯å°†è°ƒç”¨å®ƒæ—¶æ‰€ä¼ äººçš„æ‰€æœ‰å‚æ•°ç®€å•åœ°è¿”å›ï¼š</p>
<pre tabindex="0"><code>function id (...) return ... end
</code></pre><p>è¯¥å‡½æ•°æ˜¯ä¸€ä¸ªå¤šå€¼æ’ç­‰å¼å‡½æ•°ï¼ˆmulti-value identity functionï¼‰ã€‚ä¸‹åˆ—å‡½æ•°çš„è¡Œä¸ºåˆ™ç±»ä¼¼äºç›´æ¥è°ƒç”¨å‡½æ•°fooï¼Œå”¯ä¸€ä¸åŒä¹‹å¤„æ˜¯åœ¨è°ƒç”¨å‡½æ•°fooä¹‹å‰ä¼šå…ˆæ‰“å°å‡ºä¼ é€’ç»™å‡½æ•°fooçš„æ‰€æœ‰å‚æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">foo1</span> (...)
</span></span><span style="display:flex;"><span>	print(<span style="color:#e6db74">&#34;calling foo:&#34;</span>, ...)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> foo(...)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>å½“è·Ÿè¸ªå¯¹æŸä¸ªç‰¹å®šçš„å‡½æ•°è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæŠ€å·§å¾ˆæœ‰ç”¨ã€‚</p>
<p>æ¥ä¸‹æ¥å†è®©æˆ‘ä»¬çœ‹å¦å¤–ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„ç¤ºä¾‹ã€‚Luaè¯­è¨€æä¾›äº†ä¸“é—¨ç”¨äºæ ¼å¼åŒ–è¾“å‡ºçš„å‡½æ•°string.formatå’Œè¾“å‡ºæ–‡æœ¬çš„å‡½æ•°io.writeã€‚æˆ‘ä»¬ä¼šå¾ˆè‡ªç„¶åœ°æƒ³åˆ°æŠŠè¿™ä¸¤ä¸ªå‡½æ•°åˆå¹¶ä¸ºä¸€ä¸ªå…·æœ‰å¯å˜é•¿å‚æ•°çš„å‡½æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fwrite</span> (fmt, ...)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> io.write(string.format(fmt, ...))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>æ³¨æ„ï¼Œåœ¨ä¸‰ä¸ªç‚¹å‰æœ‰ä¸€ä¸ªå›ºå®šçš„å‚æ•°fmtã€‚å…·æœ‰å¯å˜é•¿å‚æ•°çš„å‡½æ•°ä¹Ÿå¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„å›ºå®šå‚æ•°ï¼Œä½†å›ºå®šå‚æ•°å¿…é¡»æ”¾åœ¨å˜é•¿å‚æ•°ä¹‹å‰ã€‚Luaè¯­è¨€ä¼šå…ˆå°†å‰é¢çš„å‚æ•°èµ‹ç»™å›ºå®šå‚æ•°ï¼Œç„¶åå°†å‰©ä½™çš„å‚æ•°ï¼ˆå¦‚æœæœ‰ï¼‰ä½œä¸ºå¯å˜é•¿å‚æ•°ã€‚</p>
<p>è¦éå†å¯å˜é•¿å‚æ•°ï¼Œå‡½æ•°å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼{&hellip;}å°†å¯å˜é•¿å‚æ•°æ”¾åœ¨ä¸€ä¸ªè¡¨ä¸­ï¼Œå°±åƒaddç¤ºä¾‹ä¸­æ‰€åšçš„é‚£æ ·ã€‚ä¸è¿‡ï¼Œåœ¨æŸäº›ç½•è§çš„æƒ…å†µä¸‹ï¼Œå¦‚æœå¯å˜é•¿å‚æ•°ä¸­åŒ…å«æ— æ•ˆçš„nilï¼Œé‚£ä¹ˆ{&hellip;}è·å¾—çš„è¡¨å¯èƒ½ä¸å†æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åºåˆ—ã€‚æ­¤æ—¶ï¼Œå°±æ²¡æœ‰åŠæ³•åœ¨è¡¨ä¸­åˆ¤æ–­åŸå§‹å‚æ•°ç©¶ç«Ÿæ˜¯ä¸æ˜¯ä»¥nilç»“å°¾çš„ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼ŒLuaè¯­è¨€æä¾›äº†å‡½æ•°table.packã€‚è¯¥å‡½æ•°åƒè¡¨è¾¾å¼{&hellip;}ä¸€æ ·ä¿å­˜æ‰€æœ‰çš„å‚æ•°ï¼Œç„¶åå°†å…¶æ”¾åœ¨ä¸€ä¸ªè¡¨ä¸­è¿”å›ï¼Œä½†æ˜¯è¿™ä¸ªè¡¨è¿˜æœ‰ä¸€ä¸ªä¿å­˜äº†å‚æ•°ä¸ªæ•°çš„é¢å¤–å­—æ®µ&quot;n&quot;ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‡½æ•°ä½¿ç”¨äº†å‡½æ•°table.packæ¥æ£€æµ‹å‚æ•°ä¸­æ˜¯å¦æœ‰nilï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">nonils</span> (...)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">local</span> arg <span style="color:#f92672">=</span> table.pack(...)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> i <span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, arg.n <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> arg[i] <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">then</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span> <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>	
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(nonils(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#66d9ef">nil</span>))		<span style="color:#75715e">--&gt; false</span>
</span></span><span style="display:flex;"><span>print(nonils(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>))				<span style="color:#75715e">--&gt; true</span>
</span></span><span style="display:flex;"><span>print(nonils())					<span style="color:#75715e">--&gt; true</span>
</span></span><span style="display:flex;"><span>print(nonils(<span style="color:#66d9ef">nil</span>))				<span style="color:#75715e">--&gt; false</span>
</span></span></code></pre></div><p>å¦ä¸€ç§éå†å‡½æ•°çš„å¯å˜é•¿å‚æ•°çš„æ–¹æ³•æ˜¯ä½¿ç”¨å‡½æ•°selectã€‚å‡½æ•°selectæ€»æ˜¯å…·æœ‰ä¸€ä¸ªå›ºå®šçš„å‚æ•°selectorï¼Œä»¥åŠæ•°é‡å¯å˜çš„å‚æ•°ã€‚å¦‚æœselectoræ˜¯æ•°å€¼nï¼Œé‚£ä¹ˆå‡½æ•°selectåˆ™è¿”å›ç¬¬nä¸ªå‚æ•°åŠä»¥åçš„æ‰€æœ‰å‚æ•°ï¼›å¦åˆ™ï¼Œselectoråº”è¯¥æ˜¯å­—ç¬¦ä¸²&quot;#&quot;ï¼Œä»¥ä¾¿å‡½æ•°selectè¿”å›é¢å¤–å‚æ•°çš„æ€»æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>print(select(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>))		<span style="color:#75715e">--&gt; a b c</span>
</span></span><span style="display:flex;"><span>print(select(<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>))		<span style="color:#75715e">--&gt; b c</span>
</span></span><span style="display:flex;"><span>print(select(<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>))		<span style="color:#75715e">--&gt; C</span>
</span></span><span style="display:flex;"><span>print(select(<span style="color:#e6db74">&#34;#&#34;</span>, <span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>))	<span style="color:#75715e">--&gt; 3</span>
</span></span></code></pre></div><p>é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨éœ€è¦æŠŠè¿”å›å€¼ä¸ªæ•°è°ƒæ•´ä¸º1çš„åœ°æ–¹ä½¿ç”¨å‡½æ•°selectï¼Œå› æ­¤å¯ä»¥æŠŠselect(n, &hellip;)è®¤ä¸ºæ˜¯è¿”å›ç¬¬nä¸ªé¢å¤–å‚æ•°çš„è¡¨è¾¾å¼ã€‚æ¥çœ‹ä¸€ä¸ªä½¿ç”¨å‡½æ•°selectçš„å…¸å‹ç¤ºä¾‹ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨è¯¥å‡½æ•°çš„addå‡½æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span> (...)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">local</span> s <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, select(<span style="color:#e6db74">&#34;#&#34;</span>, ...)<span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>        s <span style="color:#f92672">=</span> s <span style="color:#f92672">+</span> select(i,...)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> s
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>å¯¹äºå‚æ•°è¾ƒå°‘çš„æƒ…å†µï¼Œç¬¬äºŒä¸ªç‰ˆæœ¬çš„addæ›´å¿«ï¼Œå› ä¸ºè¯¥ç‰ˆæœ¬é¿å…äº†æ¯æ¬¡è°ƒç”¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°è¡¨ã€‚ä¸è¿‡ï¼Œå¯¹äºå‚æ•°è¾ƒå¤šçš„æƒ…å†µï¼Œå¤šæ¬¡å¸¦æœ‰å¾ˆå¤šå‚æ•°è°ƒç”¨å‡½æ•°selectä¼šè¶…è¿‡åˆ›å»ºè¡¨çš„å¼€é”€ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¼šæ›´å¥½ï¼ˆç‰¹åˆ«åœ°ï¼Œç”±äºè¿­ä»£çš„æ¬¡æ•°å’Œæ¯æ¬¡è¿­ä»£æ—¶ä¼ å…¥å‚æ•°çš„ä¸ªæ•°ä¼šéšç€å‚æ•°çš„ä¸ªæ•°å¢é•¿ï¼Œå› æ­¤ç¬¬äºŒä¸ªç‰ˆæœ¬çš„æ—¶é—´å¼€é”€æ˜¯äºŒæ¬¡ä»£ä»·ï¼ˆquadratic costï¼‰çš„ï¼‰ã€‚</p>
<h2 id="63-å‡½æ•°tableunpack">6.3 å‡½æ•°table.unpack</h2>
<p>å¤šé‡è¿”å›å€¼è¿˜æ¶‰åŠä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°table.unpackã€‚è¯¥å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ˆè¡¨ï¼‰ï¼Œè¿”å›å€¼ä¸ºæ•°ç»„å†…çš„æ‰€æœ‰å…ƒç´ ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>print(table.unpack{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>})		<span style="color:#75715e">--&gt; 10 20 30</span>
</span></span><span style="display:flex;"><span>a, b <span style="color:#f92672">=</span> table.unpack{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>}		<span style="color:#75715e">--&gt; a=10, b=20, 30è¢«ä¸¢å¼ƒ</span>
</span></span></code></pre></div><p>é¡¾åæ€ä¹‰ï¼Œå‡½æ•°table.unpackä¸å‡½æ•°table.packçš„åŠŸèƒ½ç›¸åã€‚packæŠŠå‚æ•°åˆ—è¡¨è½¬æ¢æˆ Luaè¯­è¨€ä¸­ä¸€ä¸ªçœŸå®çš„åˆ—è¡¨ï¼ˆä¸€ä¸ªè¡¨ï¼‰ï¼Œè€Œunpackåˆ™æŠŠLuaè¯­è¨€ä¸­çš„çœŸå®çš„åˆ—è¡¨ï¼ˆä¸€ä¸ªè¡¨ï¼‰è½¬æ¢æˆä¸€ç»„è¿”å›å€¼ï¼Œè¿›è€Œå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°è¢«ä½¿ç”¨ã€‚</p>
<p>unpackå‡½æ•°çš„é‡è¦ç”¨é€”ä¹‹ä¸€ä½“ç°åœ¨æ³›å‹è°ƒç”¨ï¼ˆgeneric callï¼‰æœºåˆ¶ä¸­ã€‚æ³›å‹è°ƒç”¨æœºåˆ¶å…è®¸æˆ‘ä»¬åŠ¨æ€åœ°è°ƒç”¨å…·æœ‰ä»»æ„å‚æ•°çš„ä»»æ„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨ISO Cä¸­ï¼Œæˆ‘ä»¬æ— æ³•ç¼–å†™æ³›å‹è°ƒç”¨çš„ä»£ç ï¼Œåªèƒ½å£°æ˜å¯å˜é•¿å‚æ•°çš„å‡½æ•°ï¼ˆä½¿ç”¨stdarg.hï¼‰æˆ–ä½¿ç”¨å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨ä¸åŒçš„å‡½æ•°ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä»ç„¶ä¸èƒ½è°ƒç”¨å…·æœ‰å¯å˜æ•°é‡å‚æ•°çš„å‡½æ•°ï¼Œå› ä¸ºCè¯­è¨€ä¸­çš„æ¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„å®å‚ä¸ªæ•°æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”æ¯ä¸ªå®å‚çš„ç±»å‹ä¹Ÿæ˜¯å›ºå®šçš„ã€‚è€Œåœ¨Luaè¯­è¨€ä¸­ï¼Œå´å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å¦‚æœæˆ‘ä»¬æƒ³é€šè¿‡æ•°ç»„aä¼ å…¥å¯å˜çš„å‚æ•°æ¥è°ƒç”¨å‡½æ•°fï¼Œé‚£ä¹ˆå¯ä»¥å†™æˆï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>f(table.unpack(a))
</span></span></code></pre></div><p>unpackä¼šè¿”å›aä¸­æ‰€æœ‰çš„å…ƒç´ ï¼Œè€Œè¿™äº›å…ƒç´ åˆè¢«ç”¨ä½œfçš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span>print(string.find(<span style="color:#e6db74">&#34;hello&#34;</span>, <span style="color:#e6db74">&#34;ll&#34;</span>))
</span></span></code></pre></div><p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç åŠ¨æ€åœ°æ„é€ ä¸€ä¸ªç­‰ä»·çš„è°ƒç”¨ï¼š</p>
<pre tabindex="0"><code>f = string.find
a = {&#34;hello&#34;,&#34;ll&#34;}

print(f(table.unpack(a)))
</code></pre><p>é€šå¸¸ï¼Œå‡½æ•°table.unpackä½¿ç”¨é•¿åº¦æ“ä½œç¬¦è·å–è¿”å›å€¼çš„ä¸ªæ•°ï¼Œå› è€Œè¯¥å‡½æ•°åªèƒ½ç”¨äºåºåˆ—ã€‚ä¸è¿‡ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œä¹Ÿå¯ä»¥æ˜¾å¼åœ°é™åˆ¶è¿”å›å…ƒç´ çš„èŒƒå›´ï¼š</p>
<pre tabindex="0"><code>print(table.unpack({&#34;Sun&#34;, &#34;Mon&#34;, &#34;Tue&#34;, &#34;Wed&#34;}, 2, 3))		--&gt; Mon Tue 2å’Œ3æ˜¯èµ·å§‹å’Œç»ˆæ­¢çš„ä½ç½®
</code></pre><p>è™½ç„¶é¢„å®šä¹‰çš„å‡½æ•°unpackæ˜¯ç”¨Cè¯­è¨€ç¼–å†™çš„ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥åˆ©ç”¨é€’å½’åœ¨Luaè¯­è¨€ä¸­å®ç°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">unpack</span> (t,i,n)
</span></span><span style="display:flex;"><span>	i <span style="color:#f92672">=</span> i <span style="color:#f92672">or</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>	n <span style="color:#f92672">=</span> n <span style="color:#f92672">or</span> <span style="color:#f92672">#</span>t
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> i <span style="color:#f92672">&lt;=</span> n <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> t[i], unpack(t, i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, n)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œåªä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œæ­¤æ—¶iä¸º1ï¼Œnä¸ºåºåˆ—é•¿åº¦ï¼›ç„¶åï¼Œå‡½æ•°è¿”å›t[1]åŠunpack(t, 2, n)è¿”å›çš„æ‰€æœ‰ç»“æœï¼Œè€Œunpack(t, 2, n)åˆä¼šè¿”å›t[2]åŠunpack(t, 3, n)è¿”å›çš„æ‰€æœ‰ç»“æœï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°å¤„ç†å®Œnä¸ªå…ƒç´ ä¸ºæ­¢ã€‚</p>
<h2 id="64-æ­£ç¡®çš„å°¾è°ƒç”¨">6.4 æ­£ç¡®çš„å°¾è°ƒç”¨</h2>
<p>Luaæ”¯æŒå°¾è°ƒç”¨æ¶ˆé™¤ï¼ˆtail-call eliminationï¼‰ã€‚è¿™æ„å‘³ç€Luaå¯ä»¥æ­£ç¡®åœ°ï¼ˆproperlyï¼‰å°¾é€’å½’ï¼ˆtail recursiveï¼‰ï¼Œè™½ç„¶å°¾è°ƒç”¨æ¶ˆé™¤çš„æ¦‚å¿µå¹¶æ²¡æœ‰ç›´æ¥æ¶‰åŠé€’å½’ã€‚</p>
<p>å°¾è°ƒç”¨ï¼ˆtail callï¼‰æ˜¯è¢«å½“ä½œå‡½æ•°è°ƒç”¨ä½¿ç”¨çš„è·³è½¬ã€‚å½“ä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°è€Œæ²¡æœ‰å†è¿›è¡Œå…¶ä»–å·¥ä½œæ—¶ï¼Œå°±å½¢æˆäº†å°¾è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œä¸‹åˆ—ä»£ç ä¸­å¯¹å‡½æ•°gçš„è°ƒç”¨å°±æ˜¯å°¾è°ƒç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">f</span> (x)
</span></span><span style="display:flex;"><span>	x <span style="color:#f92672">=</span> x <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> g(x)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>å½“å‡½æ•°fè°ƒç”¨å®Œå‡½æ•°gä¹‹åï¼Œfä¸å†éœ€è¦è¿›è¡Œå…¶ä»–çš„å·¥ä½œã€‚è¿™æ ·ï¼Œå½“è¢«è°ƒç”¨çš„å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œç¨‹åºå°±ä¸å†éœ€è¦è¿”å›æœ€åˆçš„è°ƒç”¨è€…ã€‚å› æ­¤ï¼Œåœ¨å°¾è°ƒç”¨ä¹‹åï¼Œç¨‹åºä¹Ÿå°±ä¸éœ€è¦åœ¨è°ƒç”¨æ ˆä¸­ä¿å­˜æœ‰å…³è°ƒç”¨å‡½æ•°çš„ä»»ä½•ä¿¡æ¯ã€‚å½“gè¿”å›æ—¶ï¼Œç¨‹åºçš„æ‰§è¡Œè·¯å¾„ä¼šç›´æ¥è¿”å›åˆ°è°ƒç”¨fçš„ä½ç½®ã€‚åœ¨ä¸€äº›è¯­è¨€çš„å®ç°ä¸­ï¼Œä¾‹å¦‚Luaè¯­è¨€è§£é‡Šå™¨ï¼Œå°±åˆ©ç”¨äº†è¿™ä¸ªç‰¹ç‚¹ï¼Œä½¿å¾—åœ¨è¿›è¡Œå°¾è°ƒç”¨æ—¶ä¸ä½¿ç”¨ä»»ä½•é¢å¤–çš„æ ˆç©ºé—´ã€‚æˆ‘ä»¬å°±å°†è¿™ç§å®ç°ç§°ä¸ºå°¾è°ƒç”¨æ¶ˆé™¤ï¼ˆtail-call elimination)ã€‚ç”±äºå°¾è°ƒç”¨ä¸ä¼šä½¿ç”¨æ ˆç©ºé—´ï¼Œæ‰€ä»¥ä¸€ä¸ªç¨‹åºä¸­èƒ½å¤ŸåµŒå¥—çš„å°¾è°ƒç”¨çš„æ•°é‡æ˜¯æ— é™çš„ã€‚ä¾‹å¦‚ï¼Œä¸‹åˆ—å‡½æ•°æ”¯æŒä»»æ„çš„æ•°å­—ä½œä¸ºå‚æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">foo</span> (n)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> n <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">then</span> <span style="color:#66d9ef">return</span> foo(n <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>è¯¥å‡½æ•°æ°¸è¿œä¸ä¼šå‘ç”Ÿæ ˆæº¢å‡ºã€‚</p>
<p>å…³äºå°¾è°ƒç”¨æ¶ˆé™¤çš„ä¸€ä¸ªé‡ç‚¹å°±æ˜¯å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªè°ƒç”¨æ˜¯å°¾è°ƒç”¨ã€‚å¾ˆå¤šå‡½æ•°è°ƒç”¨ä¹‹æ‰€ä»¥ä¸æ˜¯å°¾è°ƒç”¨ï¼Œæ˜¯ç”±äºè¿™äº›å‡½æ•°åœ¨è°ƒç”¨ä¹‹åè¿˜è¿›è¡Œäº†å…¶ä»–å·¥ä½œã€‚ä¾‹å¦‚ï¼Œä¸‹ä¾‹ä¸­è°ƒç”¨gå°±ä¸æ˜¯å°¾è°ƒç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">f</span> (x)
</span></span><span style="display:flex;"><span>	g(x)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>è¿™ä¸ªç¤ºä¾‹çš„é—®é¢˜åœ¨äºï¼Œå½“è°ƒç”¨å®Œgåï¼Œfåœ¨è¿”å›å‰è¿˜ä¸å¾—ä¸ä¸¢å¼ƒgè¿”å›çš„æ‰€æœ‰ç»“æœã€‚ç±»ä¼¼çš„ï¼Œä»¥ä¸‹çš„æ‰€æœ‰è°ƒç”¨ä¹Ÿéƒ½ä¸ç¬¦åˆå°¾è°ƒç”¨çš„å®šä¹‰ï¼š</p>
<pre tabindex="0"><code>return g(x) + 1		-- å¿…é¡»è¿›è¡ŒåŠ æ³•
return x or g(x)	-- å¿…é¡»æŠŠè¿”å›å€¼é™åˆ¶ä¸º1ä¸ª
return (g(x))		-- å¿…é¡»æŠŠè¿”å›å€¼é™åˆ¶ä¸º1ä¸ª
</code></pre><p>åœ¨Luaè¯­è¨€ä¸­ï¼Œåªæœ‰å½¢å¦‚return func(args)çš„è°ƒç”¨æ‰æ˜¯å°¾è°ƒç”¨ã€‚ä¸è¿‡ï¼Œç”±äºLuaè¯­è¨€ä¼šåœ¨è°ƒç”¨å‰å¯¹funcåŠå…¶å‚æ•°æ±‚å€¼ï¼Œæ‰€ä»¥funcåŠå…¶å‚æ•°éƒ½å¯ä»¥æ˜¯å¤æ‚çš„è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä¾‹å­å°±æ˜¯å°¾è°ƒç”¨ï¼š</p>
<pre tabindex="0"><code>return x[i].foo(x[j] + a*b, i + j)	
</code></pre>
        </div>

        <div class="row middle-xs">
          <div class="col-xs-12">
            
          </div>
        </div>
        
          <div class="row">
            <div class="col-xs-12">
              
            </div>
          </div>

          



          
          
          <div style="height: 50px;"></div>
          
          <div class="post-comments">
            <div id="disqus_thread"></div>
<script>
  window.addEventListener("load", () => {
    (function() {
      
      var d = document,
        s = d.createElement("script");
      s.src = "https://dongi30.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  });
</script>
<noscript
  >Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript"
    >comments powered by Disqus.</a
  ></noscript
>

          </div>
          
        

        <div class="site-footer">
  
  
</div>

      </div>
    </div>
  </article>

  

<script>
  
  
    
    
  
</script>

  

</body>

</html>